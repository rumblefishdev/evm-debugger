Transform: AWS::Serverless-2016-10-31
Parameters:
  Environment:
    Type: String
  CertificateArn:
    Type: String
  HostedZoneId:
    Type: String
  Domain:
    Type: String
  JsonBucketName:
    Type: String
  ApiGatewayAllowOrigin:
    Type: String
  AlchemyKey:
    Type: String
Resources:
  Frontend:
    Type: AWS::Serverless::Application
    Properties:
      Location: Frontend/template.yaml
      Parameters:
        CertificateArn:
          Ref: CertificateArn
        HostedZoneId:
          Ref: HostedZoneId
        DomainName:
          Ref: JsonBucketName
    Metadata:
      SamResourceId: Frontend
  TransactionTraceService:
    Type: AWS::Serverless::Application
    Properties:
      Location: TransactionTraceService/template.yaml
      Parameters:
        Environment:
          Ref: Environment
        HostedZoneId:
          Ref: HostedZoneId
        Domain:
          Ref: Domain
        CertificateArn:
          Ref: CertificateArn
        JsonBucketName:
          Ref: JsonBucketName
        ApiGatewayAllowOrigin:
          Ref: ApiGatewayAllowOrigin
        TransactionTraceProviderImage:
          Ref: TransactionTraceProviderImage
        AlchemyKey:
          Ref: AlchemyKey
    Metadata:
      SamResourceId: TransactionTraceService
